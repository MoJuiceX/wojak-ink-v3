/**
 * Trait frequencies from Wojak Farmers Plot NFT collection (4200 NFTs)
 * Normalized frequencies (0-1) for each trait value in each trait group
 */

export const TRAIT_FREQUENCIES = {
  "Background": {
    "$BEPE": 0.0195238095,
    "$CASTER": 0.0102380952,
    "$CHIA": 0.0521428571,
    "$HOA": 0.0316666667,
    "$HONK": 0.0090476190,
    "$LOVE": 0.0214285714,
    "$NECKCOIN": 0.0116666667,
    "$PIZZA": 0.0121428571,
    "Bepe Barracks": 0.0345238095,
    "Chia Farm": 0.0207142857,
    "Chia Green": 0.0552380952,
    "Crazy Room": 0.0059523810,
    "Everythings Fine": 0.0100000000,
    "Golden Hour": 0.0207142857,
    "Green Candle": 0.0457142857,
    "Heaven": 0.0211904762,
    "Hell": 0.0269047619,
    "Hot Coral": 0.0223809524,
    "Matrix": 0.0254761905,
    "Mellow Yellow": 0.0302380952,
    "Moms Basement": 0.0145238095,
    "Moon": 0.0352380952,
    "Morning Routine": 0.0085714286,
    "NYSE Dump": 0.0150000000,
    "NYSE Pump": 0.0178571429,
    "NYSE Rug": 0.0107142857,
    "Neo Mint": 0.0419047619,
    "Nesting Grounds": 0.0128571429,
    "One Market": 0.0188095238,
    "Orange Grove": 0.0333333333,
    "Pirate Ship": 0.0180952381,
    "Price Down": 0.0188095238,
    "Price Up": 0.0176190476,
    "Radioactive Forest": 0.0271428571,
    "Rainforest": 0.0071428571,
    "Rome": 0.0100000000,
    "Ronin Dojo": 0.0107142857,
    "Route 66": 0.0173809524,
    "Signal Lost": 0.0033333333,
    "Silicon Data Center": 0.0161904762,
    "Sky Dive": 0.0490476190,
    "Sky Shock Blue": 0.0488095238,
    "Spell Room": 0.0140476190,
    "Tangerine Pop": 0.0352380952,
    "White House": 0.0107142857,
  },
  "Base": {
    "Alien Baddie": 0.0083333333,
    "Alien Soyjak": 0.0190476190,
    "Alien Waifu": 0.0083333333,
    "Alien Wojak": 0.0238095238,
    "Baddie": 0.0476190476,
    "Bepe Baddie": 0.0100000000,
    "Bepe Soyjak": 0.0228571429,
    "Bepe Waifu": 0.0100000000,
    "Bepe Wojak": 0.0295238095,
    "Monkey Zoo": 0.0476190476,
    "Papa Tang": 0.0595238095,
    "Soyjak": 0.1785714286,
    "Waifu": 0.0595238095,
    "Wojak": 0.4752380952,
  },
  "Clothes": {
    "Astronaut": 0.0104761905,
    "Bathrobe": 0.0295238095,
    "Bepe Army": 0.0495238095,
    "Bepe Suit": 0.0133333333,
    "Born to Ride": 0.0488095238,
    "Chia Farmer": 0.0511904762,
    "Denim Vest": 0.0095238095,
    "Drac": 0.0230952381,
    "El Presidente": 0.0116666667,
    "Firefighter Uniform": 0.0221428571,
    "God's Robe": 0.0190476190,
    "Goose Suit": 0.0140476190,
    "Gopher Suit": 0.0209523810,
    "Leather Jacket": 0.0473809524,
    "Ninja Turtle Fit": 0.0338095238,
    "Pepe Suit": 0.0150000000,
    "Piccolo Uniform": 0.0033333333,
    "Pickle Suit": 0.0119047619,
    "Prom Dress": 0.0076190476,
    "Proof of Prayer": 0.0240476190,
    "Roman Drip": 0.0461904762,
    "Ronin": 0.0400000000,
    "SWAT Gear": 0.0302380952,
    "School Uniform": 0.0073809524,
    "Sonic Suit": 0.0102380952,
    "Sports Bra": 0.0140476190,
    "Sports Jacket": 0.0561904762,
    "Straitjacket": 0.0204761905,
    "Suit": 0.0561904762,
    "Super Saiyan Uniform": 0.0452380952,
    "Tank Top": 0.0254761905,
    "Tee": 0.0276190476,
    "Topless": 0.0645238095,
    "Viking Armor": 0.0307142857,
    "Vintage Dress": 0.0119047619,
    "Wizard Drip": 0.0471428571,
  },
  "Face": {
    "Bleeding Bags": 0.0866666667,
    "Classic": 0.4952380952,
    "NPC": 0.0604761905,
    "Rekt": 0.1557142857,
    "Rugged": 0.0983333333,
    "Terminator": 0.1035714286,
  },
  "Face Wear": {
    "3D Glasses": 0.0390476190,
    "Alpha Shades": 0.0528571429,
    "Aviators": 0.0461904762,
    "Clown Nose": 0.0428571429,
    "Cool Glasses": 0.0383333333,
    "Cyber Shades": 0.0373809524,
    "Eye Patch": 0.0290476190,
    "Fake It Mask": 0.0092857143,
    "Laser Eyes": 0.0354761905,
    "MOG Glasses": 0.0719047619,
    "Matrix Lenses": 0.0428571429,
    "Night Vision": 0.0288095238,
    "Ninja Turtle Mask": 0.0340476190,
    "No Face Wear": 0.3547619048,
    "Shades": 0.0635714286,
    "Tyson Tattoo": 0.0230952381,
    "VR Headset": 0.0159523810,
    "Wizard Glasses": 0.0345238095,
  },
  "Head": {
    "2Pac Bandana": 0.0057142857,
    "Beanie": 0.0164285714,
    "Beer Hat": 0.0202380952,
    "Cap": 0.0300000000,
    "Centurion": 0.0314285714,
    "Clown": 0.0340476190,
    "Comrade Hat": 0.0173809524,
    "Construction Helmet": 0.0333333333,
    "Cowboy Hat": 0.0209523810,
    "Crown": 0.0333333333,
    "Devil Horns": 0.0216666667,
    "Fedora": 0.0264285714,
    "Field Cap": 0.0300000000,
    "Firefighter Helmet": 0.0257142857,
    "Halo": 0.0169047619,
    "Hard Hat": 0.0223809524,
    "Headphones": 0.0030952381,
    "Hip Hop Hat": 0.0152380952,
    "Mermaid Waves": 0.0109523810,
    "Military Beret": 0.0390476190,
    "No Headgear": 0.1530952381,
    "Piccolo Turban": 0.0021428571,
    "Pirate Hat": 0.0235714286,
    "Ponytail": 0.0078571429,
    "Power Bob": 0.0069047619,
    "Propeller Hat": 0.0326190476,
    "Ronin Helmet": 0.0307142857,
    "SWAT Helmet": 0.0295238095,
    "Soy Hair": 0.0050000000,
    "Spikes": 0.0202380952,
    "Standard Cut": 0.0064285714,
    "Super Saiyan": 0.0464285714,
    "Super Wojak Hat": 0.0219047619,
    "Tiara": 0.0057142857,
    "Tin Foil Hat": 0.0278571429,
    "Trump Wave": 0.0185714286,
    "Twin Braids": 0.0069047619,
    "Viking Helmet": 0.0321428571,
    "Vixen Waves": 0.0090476190,
    "Wizard Hat": 0.0590476190,
  },
  "Mouth": {
    "Bandana Mask": 0.0252380952,
    "Bubble Gum": 0.0445238095,
    "Cig": 0.0985714286,
    "Cohiba": 0.0719047619,
    "Copium Mask": 0.0250000000,
    "Glossed Lips": 0.0350000000,
    "Gold Teeth": 0.0654761905,
    "Hannibal Mask": 0.0180952381,
    "Joint": 0.0721428571,
    "Neckbeard": 0.0438095238,
    "Numb": 0.1166666667,
    "Pipe": 0.0435714286,
    "Pizza": 0.0523809524,
    "Screaming": 0.0828571429,
    "Sexy Lip Bite": 0.0140476190,
    "Smile": 0.0426190476,
    "Stache": 0.0328571429,
    "Stunned": 0.0214285714,
    "Teeth": 0.0590476190,
    "Vampire Teeth": 0.0347619048,
  },
};

/**
 * Normalizes weights object: clamps negatives to 0, then normalizes to sum 1
 * @param {Object|Map} weights - Object or Map with numeric values
 * @returns {Object|Map} - Normalized weights (same type as input)
 */
export function normalizeWeights(weights) {
  // Convert Map to object if needed, then convert back
  const isMap = weights instanceof Map;
  const weightObj = isMap ? Object.fromEntries(weights) : weights;
  
  // Clamp negatives to 0 and sum
  const clamped = {};
  let sum = 0;
  
  for (const [key, value] of Object.entries(weightObj)) {
    const clampedValue = Math.max(0, value);
    clamped[key] = clampedValue;
    sum += clampedValue;
  }
  
  // Normalize to sum 1 (or return zeros if sum is 0)
  const normalized = {};
  if (sum > 0) {
    for (const [key, value] of Object.entries(clamped)) {
      normalized[key] = value / sum;
    }
  } else {
    // If all weights are 0 or negative, return equal weights
    const count = Object.keys(clamped).length;
    const equalWeight = count > 0 ? 1 / count : 0;
    for (const key of Object.keys(clamped)) {
      normalized[key] = equalWeight;
    }
  }
  
  // Convert back to Map if input was Map
  return isMap ? new Map(Object.entries(normalized)) : normalized;
}











