/**
 * GameEffects Styles
 *
 * Universal visual effects system - premium animations for all games.
 * Extracted and adapted from Brick by Brick's effect system.
 */

/* ============================================================================
   CONTAINER
   ============================================================================ */

.game-effects-container {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 100;
  overflow: hidden;
}

/* ============================================================================
   SCREEN SHAKE
   ============================================================================ */

.screen-shake {
  animation: shake 0.3s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
}

@keyframes shake {
  0%,
  100% {
    transform: translate(0, 0);
  }
  10% {
    transform: translate(-8px, -4px);
  }
  20% {
    transform: translate(8px, 4px);
  }
  30% {
    transform: translate(-6px, 2px);
  }
  40% {
    transform: translate(6px, -2px);
  }
  50% {
    transform: translate(-4px, 4px);
  }
  60% {
    transform: translate(4px, -4px);
  }
  70% {
    transform: translate(-2px, 2px);
  }
  80% {
    transform: translate(2px, -2px);
  }
  90% {
    transform: translate(-1px, 1px);
  }
}

/* ============================================================================
   SHOCKWAVE - Expanding ring on impact
   ============================================================================ */

.effect-shockwave {
  position: absolute;
  transform: translate(-50%, -50%);
  width: 20px;
  height: 20px;
  border: 3px solid rgba(255, 140, 0, 0.8);
  border-radius: 50%;
  pointer-events: none;
  z-index: 50;
  animation: shockwave-expand 0.6s ease-out forwards;
}

@keyframes shockwave-expand {
  0% {
    width: 20px;
    height: 20px;
    opacity: 1;
    border-width: 4px;
  }
  100% {
    width: 300px;
    height: 300px;
    opacity: 0;
    border-width: 1px;
    transform: translate(-50%, -50%);
  }
}

/* ============================================================================
   IMPACT SPARKS - Flying debris particles
   ============================================================================ */

.effect-sparks {
  position: absolute;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 60;
}

.effect-sparks .spark {
  position: absolute;
  font-size: 14px;
  color: #ffd700;
  text-shadow: 0 0 10px #ff6b00, 0 0 20px #ff6b00;
  animation: spark-fly 0.5s ease-out forwards;
}

@keyframes spark-fly {
  0% {
    transform: rotate(var(--spark-angle)) translateX(0) scale(1);
    opacity: 1;
  }
  100% {
    transform: rotate(var(--spark-angle)) translateX(80px) scale(0);
    opacity: 0;
  }
}

/* ============================================================================
   VIGNETTE PULSE - Edge darkening flash
   ============================================================================ */

.effect-vignette {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 200;
  animation: vignette-flash 0.4s ease-out forwards;
}

@keyframes vignette-flash {
  0% {
    opacity: 0;
  }
  30% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

/* ============================================================================
   FLOATING EMOJIS - Rise up and fade
   ============================================================================ */

.effect-floating-emoji {
  position: absolute;
  bottom: 40%;
  transform: translateX(-50%);
  font-size: 32px;
  pointer-events: none;
  z-index: 150;
  animation: emoji-float-up 1.5s ease-out forwards;
  filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
}

@keyframes emoji-float-up {
  0% {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(0.5) rotate(-10deg);
  }
  20% {
    opacity: 1;
    transform: translateX(-50%) translateY(-30px) scale(1.2) rotate(5deg);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) translateY(-150px) scale(0.8) rotate(15deg);
  }
}

/* ============================================================================
   EPIC CALLOUT - "UNSTOPPABLE!", "LEGENDARY!", etc.
   ============================================================================ */

.effect-epic-callout {
  position: absolute;
  top: 35%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 42px;
  font-weight: 900;
  color: #fff;
  text-shadow:
    0 0 20px #ff6b00,
    0 0 40px #ff6b00,
    0 0 60px #ff6b00,
    0 4px 8px rgba(0, 0, 0, 0.8);
  letter-spacing: 4px;
  pointer-events: none;
  z-index: 300;
  animation: epic-callout-entrance 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  white-space: nowrap;
  text-align: center;
}

@keyframes epic-callout-entrance {
  0% {
    transform: translate(-50%, -50%) scale(0) rotate(-20deg);
    opacity: 0;
  }
  20% {
    transform: translate(-50%, -50%) scale(1.3) rotate(5deg);
    opacity: 1;
  }
  40% {
    transform: translate(-50%, -50%) scale(1) rotate(0deg);
  }
  60% {
    transform: translate(-50%, -50%) scale(1.1) rotate(-2deg);
  }
  80% {
    transform: translate(-50%, -50%) scale(1) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) scale(0.8) translateY(-50px);
    opacity: 0;
  }
}

/* ============================================================================
   CONFETTI EXPLOSION
   ============================================================================ */

.effect-confetti-container {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 250;
}

.confetti-piece {
  position: absolute;
  top: -10px;
  left: var(--confetti-x);
  width: 10px;
  height: 10px;
  background: var(--confetti-color);
  animation: confetti-fall 3s ease-out forwards;
  animation-delay: var(--confetti-delay);
  opacity: 0;
}

.confetti-piece:nth-child(odd) {
  border-radius: 50%;
}

.confetti-piece:nth-child(3n) {
  width: 6px;
  height: 14px;
}

.confetti-piece:nth-child(5n) {
  width: 12px;
  height: 6px;
}

@keyframes confetti-fall {
  0% {
    transform: translateY(0) rotate(0deg) scale(0);
    opacity: 0;
  }
  10% {
    opacity: 1;
    transform: translateY(20px) rotate(45deg) scale(1);
  }
  100% {
    transform: translateY(600px) rotate(720deg) scale(0.5);
    opacity: 0;
  }
}

/* ============================================================================
   SCORE POPUPS - Flying +points
   ============================================================================ */

.effect-score-popup {
  position: absolute;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  pointer-events: none;
  z-index: 150;
  animation: score-fly-up 1s ease-out forwards;
}

.effect-score-popup.with-prefix {
  animation: score-fly-up-prefix 1.2s ease-out forwards;
}

.effect-score-popup .score-popup-value {
  font-size: 32px;
  font-weight: 900;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Mono', monospace;
  text-shadow:
    0 0 20px currentColor,
    0 0 40px currentColor,
    0 2px 8px rgba(0, 0, 0, 0.6);
  line-height: 1;
}

.effect-score-popup .score-popup-prefix {
  font-size: 14px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 4px;
  opacity: 0.9;
  text-shadow:
    0 0 10px currentColor,
    0 2px 4px rgba(0, 0, 0, 0.5);
}

@keyframes score-fly-up {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(0) scale(0.5);
  }
  15% {
    opacity: 1;
    transform: translateX(-50%) translateY(-15px) scale(1.3);
  }
  30% {
    transform: translateX(-50%) translateY(-25px) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) translateY(-100px) scale(0.8);
  }
}

@keyframes score-fly-up-prefix {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(0) scale(0.3);
  }
  10% {
    opacity: 1;
    transform: translateX(-50%) translateY(-10px) scale(1.4);
  }
  25% {
    transform: translateX(-50%) translateY(-20px) scale(1);
  }
  80% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) translateY(-120px) scale(0.7);
  }
}

/* ============================================================================
   COMBO DISPLAY - Escalating combo counter
   ============================================================================ */

.effect-combo {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  pointer-events: none;
  z-index: 100;
  animation: combo-entrance 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.effect-combo .combo-number {
  font-size: 72px;
  font-weight: 900;
  color: #fff;
  text-shadow:
    0 0 20px rgba(168, 85, 247, 0.8),
    0 0 40px rgba(168, 85, 247, 0.6),
    0 4px 8px rgba(0, 0, 0, 0.5);
  line-height: 1;
  animation: combo-pulse 0.6s ease-in-out infinite alternate;
}

.effect-combo .combo-label {
  font-size: 16px;
  font-weight: 700;
  letter-spacing: 6px;
  color: rgba(255, 255, 255, 0.9);
  text-transform: uppercase;
  margin-top: -8px;
}

.effect-combo .combo-fire,
.effect-combo .combo-stars {
  position: absolute;
  font-size: 28px;
  animation: float-emoji 1s ease-in-out infinite;
}

.effect-combo .combo-fire {
  top: -20px;
  right: -30px;
}

.effect-combo .combo-stars {
  top: -15px;
  left: -30px;
  animation-delay: 0.3s;
}

@keyframes combo-entrance {
  0% {
    transform: translate(-50%, -50%) scale(0) rotate(-10deg);
    opacity: 0;
  }
  100% {
    transform: translate(-50%, -50%) scale(1) rotate(0deg);
    opacity: 1;
  }
}

@keyframes combo-pulse {
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(1.08);
  }
}

@keyframes float-emoji {
  0%,
  100% {
    transform: translateY(0) rotate(-5deg);
  }
  50% {
    transform: translateY(-8px) rotate(5deg);
  }
}

/* ============================================================================
   COMBO LEVEL COLORS - Escalating intensity
   ============================================================================ */

.combo-level-2 .combo-number {
  color: #a78bfa;
  text-shadow:
    0 0 20px rgba(167, 139, 250, 0.6),
    0 4px 8px rgba(0, 0, 0, 0.4);
}

.combo-level-3 .combo-number {
  color: #c084fc;
  text-shadow:
    0 0 25px rgba(192, 132, 252, 0.7),
    0 4px 8px rgba(0, 0, 0, 0.4);
}

.combo-level-4 .combo-number {
  color: #e879f9;
  text-shadow:
    0 0 30px rgba(232, 121, 249, 0.8),
    0 4px 8px rgba(0, 0, 0, 0.4);
}

.combo-level-5 .combo-number {
  color: #f472b6;
  font-size: 80px;
  text-shadow:
    0 0 35px rgba(244, 114, 182, 0.9),
    0 0 60px rgba(244, 114, 182, 0.5),
    0 4px 8px rgba(0, 0, 0, 0.4);
}

.combo-level-6 .combo-number {
  color: #fb7185;
  font-size: 84px;
  text-shadow:
    0 0 40px rgba(251, 113, 133, 1),
    0 0 70px rgba(251, 113, 133, 0.6),
    0 4px 8px rgba(0, 0, 0, 0.4);
}

.combo-level-7 .combo-number {
  color: #f97316;
  font-size: 88px;
  text-shadow:
    0 0 45px rgba(249, 115, 22, 1),
    0 0 80px rgba(249, 115, 22, 0.7),
    0 4px 8px rgba(0, 0, 0, 0.4);
}

.combo-level-8 .combo-number {
  color: #fbbf24;
  font-size: 92px;
  text-shadow:
    0 0 50px rgba(251, 191, 36, 1),
    0 0 90px rgba(251, 191, 36, 0.8),
    0 4px 8px rgba(0, 0, 0, 0.4);
  animation: mega-pulse 0.4s ease-in-out infinite alternate;
}

.combo-level-9 .combo-number {
  color: #fcd34d;
  font-size: 96px;
  text-shadow:
    0 0 55px rgba(252, 211, 77, 1),
    0 0 100px rgba(252, 211, 77, 0.9),
    0 4px 8px rgba(0, 0, 0, 0.4);
  animation: mega-pulse 0.35s ease-in-out infinite alternate;
}

.combo-level-10 .combo-number {
  color: #fff;
  font-size: 100px;
  text-shadow:
    0 0 60px #ffd700,
    0 0 120px #ffd700,
    0 0 180px rgba(255, 215, 0, 0.8),
    0 4px 8px rgba(0, 0, 0, 0.4);
  animation: legendary-pulse 0.3s ease-in-out infinite alternate;
}

@keyframes mega-pulse {
  0% {
    transform: scale(1);
    filter: brightness(1);
  }
  100% {
    transform: scale(1.12);
    filter: brightness(1.2);
  }
}

@keyframes legendary-pulse {
  0% {
    transform: scale(1) rotate(-1deg);
    filter: brightness(1) hue-rotate(0deg);
  }
  100% {
    transform: scale(1.15) rotate(1deg);
    filter: brightness(1.3) hue-rotate(10deg);
  }
}

/* ============================================================================
   MOBILE RESPONSIVE
   ============================================================================ */

@media (max-width: 480px) {
  .effect-combo .combo-number {
    font-size: 48px;
  }

  .effect-combo .combo-label {
    font-size: 12px;
    letter-spacing: 4px;
  }

  .effect-epic-callout {
    font-size: 28px;
    letter-spacing: 2px;
  }

  .effect-score-popup .score-popup-value {
    font-size: 24px;
  }

  .effect-score-popup .score-popup-prefix {
    font-size: 11px;
  }

  .effect-floating-emoji {
    font-size: 24px;
  }

  .effect-combo .combo-fire,
  .effect-combo .combo-stars {
    font-size: 20px;
  }

  /* Scale down combo level sizes */
  .combo-level-5 .combo-number {
    font-size: 52px;
  }
  .combo-level-6 .combo-number {
    font-size: 56px;
  }
  .combo-level-7 .combo-number {
    font-size: 60px;
  }
  .combo-level-8 .combo-number {
    font-size: 64px;
  }
  .combo-level-9 .combo-number {
    font-size: 68px;
  }
  .combo-level-10 .combo-number {
    font-size: 72px;
  }
}

@media (max-width: 360px) {
  .effect-combo .combo-number {
    font-size: 40px;
  }

  .effect-epic-callout {
    font-size: 24px;
  }

  .effect-score-popup .score-popup-value {
    font-size: 20px;
  }
}
