<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wojak Generator | Wojak.ink</title>

  <style>
    /* ============================================
       CSS Variables & Theme System
       ============================================ */
    :root {
      /* Dark theme (default) */
      --bg-primary: #0a0a0f;
      --bg-secondary: #12121a;
      --bg-tertiary: #1a1a2e;
      --bg-glass: rgba(20, 20, 30, 0.8);
      --border-color: rgba(255, 255, 255, 0.1);
      --text-primary: #ffffff;
      --text-secondary: #a0a0a0;
      --text-muted: #666666;
      --brand-primary: #e8792f;
      --brand-secondary: #22c55e;
      --glow-primary: 0 0 20px rgba(232, 121, 47, 0.3);
      --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.5);
    }

    [data-theme="light"] {
      --bg-primary: #f5f5f5;
      --bg-secondary: #ffffff;
      --bg-tertiary: #e8e8e8;
      --bg-glass: rgba(255, 255, 255, 0.9);
      --border-color: rgba(0, 0, 0, 0.1);
      --text-primary: #1a1a1a;
      --text-secondary: #666666;
      --text-muted: #999999;
      --brand-primary: #e8792f;
      --brand-secondary: #16a34a;
      --glow-primary: 0 0 20px rgba(232, 121, 47, 0.2);
      --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.1);
    }

    /* ============================================
       Reset & Base Styles
       ============================================ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
      transition: background 0.3s ease, color 0.3s ease;
    }

    button {
      font-family: inherit;
      cursor: pointer;
      border: none;
      background: none;
    }

    /* ============================================
       Header / Title Bar
       - Centered with favicon, Wojak.ink, emojis, rotating text
       ============================================ */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 64px;
      background: var(--bg-glass);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      transition: background 0.3s ease;
    }

    .header-content {
      display: flex;
      align-items: center;
      /* Custom spacing: favicon-10px-text-10px-üçä-4px-sentence-4px-üå± */
    }

    .favicon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      object-fit: contain;
      padding: 4px;
      margin-right: 10px;
    }

    .brand-name {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-primary);
      letter-spacing: -0.02em;
      margin-right: 10px;
    }

    .brand-name .highlight {
      color: var(--brand-primary);
    }

    .emoji {
      font-size: 1.25rem;
      line-height: 1;
    }

    .emoji-orange {
      margin-right: 4px;
      animation: pulse 2s ease-in-out infinite;
    }

    .emoji-seedling {
      animation: pulse 2s ease-in-out infinite;
      animation-delay: 1s;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.15); }
    }

    .sentence-container {
      width: 200px;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-right: 4px;
      overflow: hidden;
    }

    .sentence {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--brand-primary);
      white-space: nowrap;
      transition: opacity 0.5s ease, transform 0.5s ease, filter 0.5s ease;
    }

    .sentence.fade-out {
      opacity: 0;
      transform: translateY(-10px);
      filter: blur(4px);
    }

    .sentence.fade-in {
      opacity: 0;
      transform: translateY(10px);
      filter: blur(4px);
    }

    /* ============================================
       Sidebar
       ============================================ */
    .sidebar {
      position: fixed;
      top: 64px;
      left: 0;
      bottom: 0;
      width: 240px;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border-color);
      display: flex;
      flex-direction: column;
      z-index: 90;
      transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s ease;
    }

    .sidebar.collapsed {
      width: 64px;
    }

    .sidebar-toggle {
      position: absolute;
      top: 12px;
      right: -16px;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-secondary);
      z-index: 10;
      transition: background 0.2s, transform 0.3s;
    }

    .sidebar-toggle:hover {
      background: var(--brand-primary);
      color: white;
    }

    .sidebar.collapsed .sidebar-toggle {
      transform: rotate(180deg);
    }

    .sidebar-nav {
      flex: 1;
      padding: 16px 8px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      border-radius: 8px;
      color: var(--text-secondary);
      text-decoration: none;
      transition: all 0.2s;
      position: relative;
      white-space: nowrap;
      overflow: hidden;
    }

    .nav-item:hover {
      background: var(--bg-tertiary);
      color: var(--text-primary);
    }

    .nav-item.active {
      background: rgba(232, 121, 47, 0.15);
      color: var(--brand-primary);
    }

    .nav-item svg {
      flex-shrink: 0;
      width: 20px;
      height: 20px;
    }

    .nav-item span {
      opacity: 1;
      transition: opacity 0.2s;
    }

    .sidebar.collapsed .nav-item span {
      opacity: 0;
      pointer-events: none;
    }

    /* Tooltip for collapsed sidebar */
    .nav-item[data-tooltip]::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 70px;
      background: var(--bg-tertiary);
      color: var(--text-primary);
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 0.875rem;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s;
      box-shadow: var(--shadow-lg);
    }

    .sidebar.collapsed .nav-item:hover[data-tooltip]::after {
      opacity: 1;
    }

    /* ============================================
       Main Content Area
       ============================================ */
    .main {
      margin-left: 240px;
      margin-top: 64px;
      min-height: calc(100vh - 64px);
      padding: 24px;
      transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .sidebar.collapsed ~ .main {
      margin-left: 64px;
    }

    .generator-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      max-width: 1400px;
      margin: 0 auto;
    }

    /* Preview Panel */
    .preview-panel {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .preview-canvas {
      aspect-ratio: 1;
      background:
        linear-gradient(45deg, #1a1a2e 25%, transparent 25%),
        linear-gradient(-45deg, #1a1a2e 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, #1a1a2e 75%),
        linear-gradient(-45deg, transparent 75%, #1a1a2e 75%);
      background-size: 20px 20px;
      background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
      background-color: var(--bg-tertiary);
      border-radius: 16px;
      border: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    [data-theme="light"] .preview-canvas {
      background:
        linear-gradient(45deg, #e0e0e0 25%, transparent 25%),
        linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, #e0e0e0 75%),
        linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);
      background-size: 20px 20px;
      background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
      background-color: #f0f0f0;
    }

    .preview-character {
      width: 80%;
      height: 80%;
      object-fit: contain;
    }

    /* Action Bar */
    .action-bar {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px;
      background: var(--bg-glass);
      border-radius: 12px;
      border: 1px solid var(--border-color);
    }

    .action-btn {
      width: 44px;
      height: 44px;
      border-radius: 10px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      position: relative;
    }

    .action-btn:hover {
      background: var(--brand-primary);
      color: white;
      border-color: var(--brand-primary);
      box-shadow: var(--glow-primary);
    }

    .action-btn[data-tooltip]::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      margin-bottom: 8px;
      background: var(--bg-tertiary);
      color: var(--text-primary);
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 0.75rem;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s;
    }

    .action-btn:hover[data-tooltip]::after {
      opacity: 1;
    }

    .action-divider {
      width: 1px;
      height: 28px;
      background: var(--border-color);
      margin: 0 4px;
    }

    /* Theme Toggle */
    .theme-toggle {
      position: relative;
    }

    .theme-toggle .icon-moon,
    .theme-toggle .icon-sun {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: opacity 0.3s, transform 0.3s;
    }

    .theme-toggle .icon-sun {
      opacity: 0;
      transform: translate(-50%, -50%) rotate(-90deg);
    }

    [data-theme="light"] .theme-toggle .icon-moon {
      opacity: 0;
      transform: translate(-50%, -50%) rotate(90deg);
    }

    [data-theme="light"] .theme-toggle .icon-sun {
      opacity: 1;
      transform: translate(-50%, -50%) rotate(0);
    }

    /* Traits Panel */
    .traits-panel {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .layer-tabs {
      display: flex;
      gap: 4px;
      padding: 4px;
      background: var(--bg-glass);
      border-radius: 12px;
      border: 1px solid var(--border-color);
      overflow-x: auto;
    }

    .layer-tab {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 8px 12px;
      border-radius: 8px;
      color: var(--text-secondary);
      font-size: 0.75rem;
      font-weight: 500;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .layer-tab:hover {
      background: var(--bg-tertiary);
      color: var(--text-primary);
    }

    .layer-tab.active {
      background: var(--brand-primary);
      color: white;
    }

    .layer-tab svg {
      width: 20px;
      height: 20px;
    }

    .traits-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px;
      padding: 16px;
      background: var(--bg-glass);
      border-radius: 16px;
      border: 1px solid var(--border-color);
      max-height: 500px;
      overflow-y: auto;
    }

    .trait-card {
      aspect-ratio: 1;
      border-radius: 12px;
      background: var(--bg-tertiary);
      border: 2px solid var(--border-color);
      overflow: hidden;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .trait-card:hover {
      border-color: var(--text-muted);
      transform: scale(1.02);
    }

    .trait-card.selected {
      border-color: var(--brand-primary);
      box-shadow: var(--glow-primary);
    }

    .trait-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .trait-card .check {
      position: absolute;
      top: 4px;
      right: 4px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--brand-primary);
      color: white;
      display: none;
      align-items: center;
      justify-content: center;
    }

    .trait-card.selected .check {
      display: flex;
    }

    /* ============================================
       Responsive Design
       ============================================ */
    @media (max-width: 1024px) {
      .generator-layout {
        grid-template-columns: 1fr;
      }

      .traits-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
        width: 240px;
      }

      .sidebar.mobile-open {
        transform: translateX(0);
      }

      .sidebar.collapsed {
        width: 240px;
      }

      .main {
        margin-left: 0;
      }

      .sidebar.collapsed ~ .main {
        margin-left: 0;
      }

      .mobile-menu-btn {
        display: flex;
      }

      .traits-grid {
        grid-template-columns: repeat(3, 1fr);
      }

      .header-content {
        transform: scale(0.85);
      }
    }

    @media (max-width: 480px) {
      .traits-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .action-bar {
        flex-wrap: wrap;
      }
    }

    /* Mobile menu overlay */
    .mobile-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 80;
    }

    .mobile-overlay.active {
      display: block;
    }

    /* Mobile menu button in header */
    .mobile-menu-btn {
      display: none;
      position: absolute;
      left: 16px;
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      align-items: center;
      justify-content: center;
      color: var(--text-secondary);
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: flex;
      }
    }

    /* ============================================
       Scrollbar Styling
       ============================================ */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-secondary);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border-color);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-muted);
    }
  </style>
</head>
<body>

  <!-- ============================================
       Header / Title Bar
       - Single centered instance of favicon + branding
       ============================================ -->
  <header class="header" role="banner">
    <!-- Mobile menu button -->
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle menu">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>

    <div class="header-content">
      <!-- Favicon - only instance -->
      <img
        src="/assets/icons/Wojak_logo.png"
        alt="Wojak Icon"
        class="favicon"
        onerror="this.style.background='linear-gradient(135deg, #3b82f6, #1d4ed8)'"
      >

      <!-- Brand name -->
      <span class="brand-name">
        Wojak<span class="highlight">.ink</span>
      </span>

      <!-- Orange emoji -->
      <span class="emoji emoji-orange" aria-hidden="true">üçä</span>

      <!-- Rotating sentence -->
      <div class="sentence-container" role="marquee" aria-live="polite">
        <span class="sentence" id="rotatingSentence">Banger NFTs on Chia</span>
      </div>

      <!-- Seedling emoji -->
      <span class="emoji emoji-seedling" aria-hidden="true">üå±</span>
    </div>
  </header>

  <!-- Mobile overlay -->
  <div class="mobile-overlay" id="mobileOverlay"></div>

  <!-- ============================================
       Sidebar Navigation
       - Collapsible with icons + text
       - No duplicate favicon here
       ============================================ -->
  <aside class="sidebar" id="sidebar" role="navigation" aria-label="Main navigation">
    <!-- Collapse toggle -->
    <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
    </button>

    <nav class="sidebar-nav">
      <a href="#" class="nav-item" data-tooltip="Gallery">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <circle cx="8.5" cy="8.5" r="1.5"></circle>
          <polyline points="21 15 16 10 5 21"></polyline>
        </svg>
        <span>Gallery</span>
      </a>

      <a href="#" class="nav-item" data-tooltip="Treasury">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
          <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
        </svg>
        <span>Treasury</span>
      </a>

      <a href="#" class="nav-item" data-tooltip="BigPulp AI">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
        <span>BigPulp AI</span>
      </a>

      <a href="#" class="nav-item active" data-tooltip="Generator">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="13.5" cy="6.5" r=".5"></circle>
          <circle cx="17.5" cy="10.5" r=".5"></circle>
          <circle cx="8.5" cy="7.5" r=".5"></circle>
          <circle cx="6.5" cy="12.5" r=".5"></circle>
          <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.555C21.965 6.012 17.461 2 12 2z"></path>
        </svg>
        <span>Generator</span>
      </a>

      <a href="#" class="nav-item" data-tooltip="Media Hub">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polygon points="10 8 16 12 10 16 10 8"></polygon>
        </svg>
        <span>Media Hub</span>
      </a>

      <a href="#" class="nav-item" data-tooltip="Settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
        </svg>
        <span>Settings</span>
      </a>
    </nav>
  </aside>

  <!-- ============================================
       Main Content
       ============================================ -->
  <main class="main">
    <div class="generator-layout">

      <!-- Left: Preview Panel -->
      <div class="preview-panel">
        <div class="preview-canvas" role="img" aria-label="Character preview">
          <img
            src="/assets/wojak-layers/BASE/BASE_Base-Wojak_classic.png"
            alt="Wojak character preview"
            class="preview-character"
            id="previewImage"
            onerror="this.style.display='none'"
          >
        </div>

        <!-- Action Bar / Toolbar -->
        <div class="action-bar" role="toolbar" aria-label="Generator actions">
          <!-- Theme Toggle -->
          <button class="action-btn theme-toggle" id="themeToggle" data-tooltip="Toggle theme" aria-label="Toggle dark/light theme">
            <svg class="icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
            <svg class="icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
          </button>

          <div class="action-divider"></div>

          <!-- Randomize -->
          <button class="action-btn" data-tooltip="Randomize" aria-label="Randomize character">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="2" y="2" width="8" height="8" rx="1"></rect>
              <rect x="14" y="2" width="8" height="8" rx="1"></rect>
              <rect x="2" y="14" width="8" height="8" rx="1"></rect>
              <rect x="14" y="14" width="8" height="8" rx="1"></rect>
              <circle cx="6" cy="6" r="1" fill="currentColor"></circle>
              <circle cx="18" cy="6" r="1" fill="currentColor"></circle>
              <circle cx="6" cy="18" r="1" fill="currentColor"></circle>
              <circle cx="16" cy="16" r="1" fill="currentColor"></circle>
              <circle cx="20" cy="16" r="1" fill="currentColor"></circle>
              <circle cx="18" cy="18" r="1" fill="currentColor"></circle>
            </svg>
          </button>

          <!-- Undo -->
          <button class="action-btn" data-tooltip="Undo" aria-label="Undo last action">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="1 4 1 10 7 10"></polyline>
              <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
            </svg>
          </button>

          <!-- Redo -->
          <button class="action-btn" data-tooltip="Redo" aria-label="Redo last action">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>

          <div class="action-divider"></div>

          <!-- Favorite -->
          <button class="action-btn" data-tooltip="Save to favorites" aria-label="Save to favorites">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
          </button>

          <!-- Download -->
          <button class="action-btn" data-tooltip="Download" aria-label="Download image">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
          </button>

          <!-- Reset -->
          <button class="action-btn" data-tooltip="Reset" aria-label="Reset character">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="9" y1="9" x2="15" y2="15"></line>
              <line x1="15" y1="9" x2="9" y2="15"></line>
            </svg>
          </button>

          <div class="action-divider"></div>

          <!-- Mint/Seedling -->
          <button class="action-btn" data-tooltip="Mint NFT" aria-label="Mint as NFT" style="color: var(--brand-secondary);">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M7 20h10"></path>
              <path d="M10 20c5.5-2.5.8-6.4 3-10"></path>
              <path d="M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z"></path>
              <path d="M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z"></path>
            </svg>
          </button>
        </div>
      </div>

      <!-- Right: Traits Panel -->
      <div class="traits-panel">
        <!-- Layer Tabs -->
        <div class="layer-tabs" role="tablist" aria-label="Layer categories">
          <button class="layer-tab active" role="tab" aria-selected="true" data-layer="base">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="8" r="5"></circle>
              <path d="M20 21a8 8 0 1 0-16 0"></path>
            </svg>
            Base
          </button>
          <button class="layer-tab" role="tab" aria-selected="false" data-layer="clothes">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20.38 3.46L16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"></path>
            </svg>
            Clothes
          </button>
          <button class="layer-tab" role="tab" aria-selected="false" data-layer="mouth">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
            </svg>
            Mouth
          </button>
          <button class="layer-tab" role="tab" aria-selected="false" data-layer="mask">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            Mask
          </button>
          <button class="layer-tab" role="tab" aria-selected="false" data-layer="eyes">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            Eyes
          </button>
          <button class="layer-tab" role="tab" aria-selected="false" data-layer="head">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7z"></path>
              <path d="M3 20h18"></path>
            </svg>
            Head
          </button>
          <button class="layer-tab" role="tab" aria-selected="false" data-layer="background">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            BG
          </button>
        </div>

        <!-- Traits Grid -->
        <div class="traits-grid" role="tabpanel" id="traitsGrid" aria-label="Available traits">
          <!-- Placeholder trait cards - would be dynamically populated -->
          <div class="trait-card selected" tabindex="0" role="button" aria-pressed="true">
            <div class="check">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
            </div>
          </div>
          <div class="trait-card" tabindex="0" role="button" aria-pressed="false"></div>
          <div class="trait-card" tabindex="0" role="button" aria-pressed="false"></div>
          <div class="trait-card" tabindex="0" role="button" aria-pressed="false"></div>
          <div class="trait-card" tabindex="0" role="button" aria-pressed="false"></div>
          <div class="trait-card" tabindex="0" role="button" aria-pressed="false"></div>
          <div class="trait-card" tabindex="0" role="button" aria-pressed="false"></div>
          <div class="trait-card" tabindex="0" role="button" aria-pressed="false"></div>
          <div class="trait-card" tabindex="0" role="button" aria-pressed="false"></div>
          <div class="trait-card" tabindex="0" role="button" aria-pressed="false"></div>
        </div>
      </div>

    </div>
  </main>

  <!-- ============================================
       JavaScript
       ============================================ -->
  <script>
    (function() {
      'use strict';

      // ============================================
      // Theme Toggle
      // ============================================
      const themeToggle = document.getElementById('themeToggle');
      const html = document.documentElement;

      // Load saved theme from localStorage
      const savedTheme = localStorage.getItem('wojak-theme') || 'dark';
      html.setAttribute('data-theme', savedTheme);

      themeToggle.addEventListener('click', () => {
        const currentTheme = html.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', newTheme);
        localStorage.setItem('wojak-theme', newTheme);
      });

      // ============================================
      // Sidebar Toggle
      // ============================================
      const sidebar = document.getElementById('sidebar');
      const sidebarToggle = document.getElementById('sidebarToggle');

      // Load saved sidebar state
      const savedSidebarState = localStorage.getItem('wojak-sidebar');
      if (savedSidebarState === 'collapsed') {
        sidebar.classList.add('collapsed');
      }

      sidebarToggle.addEventListener('click', () => {
        sidebar.classList.toggle('collapsed');
        const isCollapsed = sidebar.classList.contains('collapsed');
        localStorage.setItem('wojak-sidebar', isCollapsed ? 'collapsed' : 'expanded');
      });

      // ============================================
      // Mobile Menu
      // ============================================
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const mobileOverlay = document.getElementById('mobileOverlay');

      mobileMenuBtn.addEventListener('click', () => {
        sidebar.classList.toggle('mobile-open');
        mobileOverlay.classList.toggle('active');
      });

      mobileOverlay.addEventListener('click', () => {
        sidebar.classList.remove('mobile-open');
        mobileOverlay.classList.remove('active');
      });

      // ============================================
      // Rotating Tagline
      // ============================================
      const sentences = [
        'Banger NFTs on Chia',
        'Art for the Grove',
        'Wojak Farmers Plot'
      ];

      const DISPLAY_DURATION = 4000;
      const FADE_DURATION = 500;

      let currentIndex = 0;
      const sentenceElement = document.getElementById('rotatingSentence');

      function transitionSentence() {
        // Fade out
        sentenceElement.classList.add('fade-out');

        setTimeout(() => {
          // Update text
          currentIndex = (currentIndex + 1) % sentences.length;
          sentenceElement.textContent = sentences[currentIndex];

          // Prepare fade in
          sentenceElement.classList.remove('fade-out');
          sentenceElement.classList.add('fade-in');

          // Trigger reflow
          void sentenceElement.offsetWidth;

          // Fade in
          sentenceElement.classList.remove('fade-in');
        }, FADE_DURATION);
      }

      setInterval(transitionSentence, DISPLAY_DURATION);

      // ============================================
      // Layer Tabs
      // ============================================
      const layerTabs = document.querySelectorAll('.layer-tab');

      layerTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          layerTabs.forEach(t => {
            t.classList.remove('active');
            t.setAttribute('aria-selected', 'false');
          });
          tab.classList.add('active');
          tab.setAttribute('aria-selected', 'true');
          // Here you would load the traits for the selected layer
        });
      });

      // ============================================
      // Trait Cards Selection
      // ============================================
      const traitCards = document.querySelectorAll('.trait-card');

      traitCards.forEach(card => {
        card.addEventListener('click', () => {
          // Deselect all in same grid
          traitCards.forEach(c => {
            c.classList.remove('selected');
            c.setAttribute('aria-pressed', 'false');
          });
          // Select clicked
          card.classList.add('selected');
          card.setAttribute('aria-pressed', 'true');
        });

        // Keyboard support
        card.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            card.click();
          }
        });
      });

      // ============================================
      // Keyboard Navigation for Sidebar
      // ============================================
      document.addEventListener('keydown', (e) => {
        // Escape closes mobile menu
        if (e.key === 'Escape') {
          sidebar.classList.remove('mobile-open');
          mobileOverlay.classList.remove('active');
        }

        // Ctrl/Cmd + B toggles sidebar
        if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
          e.preventDefault();
          sidebarToggle.click();
        }
      });

      console.log('Wojak Generator initialized');
      console.log('Theme:', savedTheme);
      console.log('Press Ctrl+B to toggle sidebar');

    })();
  </script>

</body>
</html>
